# Using datamode-code-generator as a Module

datamodel-code-generator is a CLI tool, but can also be used as a module.

You can call this code-generator in your python code.

## How to use it as module

You can generate models with `datamodel_code_generator.generate` in a temporary directory. The generated files cna then be read from that directory.

### Installation
```sh
pip install "datamodel-code-generator[http]"
```

### Example
```python
from pathlib import Path
from tempfile import TemporaryDirectory
from datamodel_code_generator import InputFileType, generate

json_schema: str = """{
    "type": "object",
    "properties": {
        "number": {"type": "number"},
        "street_name": {"type": "string"},
        "street_type": {"type": "string",
                        "enum": ["Street", "Avenue", "Boulevard"]
                        }
    }
}"""

with TemporaryDirectory() as temporary_directory_name:
    temporary_directory = Path(temporary_directory_name)
    output = Path(temporary_directory / 'model.py')
    generate(
        json_schema,
        input_file_type=InputFileType.JsonSchema,
        input_filename="example.json",
        output=output,
    )
    model: str = output.read_text()
print(model)
```

The result of `print(model)`
```python
# generated by datamodel-codegen:
#   filename:  example.json
#   timestamp: 2020-12-21T08:01:06+00:00

from __future__ import annotations

from enum import Enum
from typing import Optional

from pydantic import BaseModel


class StreetType(Enum):
    Street = 'Street'
    Avenue = 'Avenue'
    Boulevard = 'Boulevard'


class Model(BaseModel):
    number: Optional[float] = None
    street_name: Optional[str] = None
    street_type: Optional[StreetType] = None
```

## Why doesn't `datamodel_code_generator.generate` return a string?

If the supplied schema generates multiple modules, there is no way to repre# Using as module

One of the powerful features of the `datamodel-code-generator` is the ability to use custom templates with the `--custom-template-dir` option.

This option allows you to provide a directory containing Jinja2 templates for customizing the generated code. In this document, we'll explore how to use this option and provide an example to help you understand its usage.

## Usage
To use the `--custom-template-dir` option, you'll need to pass the directory path containing your custom templates as an argument. The command will look like this:

datamodel-code-generator is a CLI. But, it has another side as a python module.

You can call this code-generator in your python code.

## How to use it as module

You can generate models with `datamodel_code_generator.generate` into a temporary directory.

And, you can read files from the directory.

### Installation
```sh
pip install "datamodel-code-generator[http]"
```

### Example
```python
from pathlib import Path
from tempfile import TemporaryDirectory
from datamodel_code_generator import InputFileType, generate

json_schema: str = """{
    "type": "object",
    "properties": {
        "number": {"type": "number"},
        "street_name": {"type": "string"},
        "street_type": {"type": "string",
                        "enum": ["Street", "Avenue", "Boulevard"]
                        }
    }
}"""

with TemporaryDirectory() as temporary_directory_name:
    temporary_directory = Path(temporary_directory_name)
    output = Path(temporary_directory / 'model.py')
    generate(
        json_schema,
        input_file_type=InputFileType.JsonSchema,
        input_filename="example.json",
        output=output,
    )
    model: str = output.read_text()
print(model)
```

The result of print(model)
```python
# generated by datamodel-codegen:
#   filename:  example.json
#   timestamp: 2020-12-21T08:01:06+00:00

from __future__ import annotations

from enum import Enum
from typing import Optional

from pydantic import BaseModel


class StreetType(Enum):
    Street = 'Street'
    Avenue = 'Avenue'
    Boulevard = 'Boulevard'


class Model(BaseModel):
    number: Optional[float] = None
    street_name: Optional[str] = None
    street_type: Optional[StreetType] = None
```

## Why doesn't `datamodel_code_generator.generate` return a string? 

The above example schema only generates a single file, but a single schema may generate multiple python modules. There is no way to represent these modules as a single string, so the `generate` method returns `None`.

Note that the *output* parameter can take any `Path` object, which includes both file and directory paths. If a file name is provided and multiple modules are generated, `generate` will raise a `datamodel_code_gen.Error` exception.

If multiple modules are generated, you will need to walk through the `TemporaryDirectory` to find all of them.